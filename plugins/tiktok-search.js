constfetch=require("node-fetch");const{cmd}=require("../command");cmd({pattern:"tiktoksearch",alias:["tiktoks","tiks"],desc:"SearchforTikTokvideosusingaquery.",react:'✅',category:'tools',filename:__filename},async(conn,m,store,{from,args,reply})=>{if(!args[0]){returnreply("🌸WhatdoyouwanttosearchonTikTok?\n\n*UsageExample:*\n.tiktoksearch<query>");}constquery=args.join("");awaitstore.react('⌛');try{reply(`🔎SearchingTikTokfor:*${query}*`);constresponse=awaitfetch(`https://apis-starlights-team.koyeb.app/starlight/tiktoksearch?text=${encodeURIComponent(query)}`);constdata=awaitresponse.json();if(!data||!data.data||data.data.length===0){awaitstore.react('❌');returnreply("❌Noresultsfoundforyourquery.Pleasetrywithadifferentkeyword.");}//Getupto7randomresultsconstresults=data.data.slice(0,7).sort(()=>Math.random()-0.5);for(constvideoofresults){constmessage=`🌸*TikTokVideoResult*:\n\n`+`*•Title*:${video.title}\n`+`*•Author*:${video.author||'Unknown'}\n`+`*•Duration*:${video.duration||"Unknown"}\n`+`*•URL*:${video.link}\n\n`;if(video.nowm){awaitconn.sendMessage(from,{video:{url:video.nowm},caption:message},{quoted:m});}else{reply(`❌Failedtoretrievevideofor*"${video.title}"*.`);}}awaitstore.react('✅');}catch(error){console.error("ErrorinTikTokSearchcommand:",error);awaitstore.react('❌');reply("❌AnerroroccurredwhilesearchingTikTok.Pleasetryagainlater.");}});