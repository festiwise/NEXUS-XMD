//JawadTechX-KHANMD//DontRemoveCreditFromFileconst{cmd}=require("../command");//SafetyConfigurationconstSAFETY={MAX_JIDS:20,BASE_DELAY:2000,//jawadontop🔝EXTRA_DELAY:4000,//huhdon'tcopyminefile};cmd({pattern:"forward",alias:["fwd"],desc:"Bulkforwardmediatogroups",category:"owner",filename:__filename},async(client,message,match,{isOwner})=>{try{//Ownercheckif(!isOwner)returnawaitmessage.reply("*📛OwnerOnlyCommand*");//Quotedmessagecheckif(!message.quoted)returnawaitmessage.reply("*🍁Pleasereplytoamessage*");//=====[BULLETPROOFJIDPROCESSING]=====//letjidInput="";//Handleallpossiblematchformatsif(typeofmatch==="string"){jidInput=match.trim();}elseif(Array.isArray(match)){jidInput=match.join("").trim();}elseif(match&&typeofmatch==="object"){jidInput=match.text||"";}//ExtractJIDs(supportscommaorspaceseparated)constrawJids=jidInput.split(/[\s,]+/).filter(jid=>jid.trim().length>0);//ProcessJIDs(acceptswithorwithout@g.us)constvalidJids=rawJids.map(jid=>{//Removeexisting@g.usifpresentconstcleanJid=jid.replace(/@g\.us$/i,"");//Onlykeepifit'sallnumbersreturn/^\d+$/.test(cleanJid)?`${cleanJid}@g.us`:null;}).filter(jid=>jid!==null).slice(0,SAFETY.MAX_JIDS);if(validJids.length===0){returnawaitmessage.reply("❌NovalidgroupJIDsfound\n"+"Examples:\n"+".fwd120363411055156472@g.us,120363333939099948@g.us\n"+".fwd120363411055156472120363333939099948");}//=====[ENHANCEDMEDIAHANDLING-ALLTYPES]=====//letmessageContent={};constmtype=message.quoted.mtype;//Formediamessages(image,video,audio,sticker,document)if(["imageMessage","videoMessage","audioMessage","stickerMessage","documentMessage"].includes(mtype)){constbuffer=awaitmessage.quoted.download();switch(mtype){case"imageMessage":messageContent={image:buffer,caption:message.quoted.text||'',mimetype:message.quoted.mimetype||"image/jpeg"};break;case"videoMessage":messageContent={video:buffer,caption:message.quoted.text||'',mimetype:message.quoted.mimetype||"video/mp4"};break;case"audioMessage":messageContent={audio:buffer,mimetype:message.quoted.mimetype||"audio/mp4",ptt:message.quoted.ptt||false};break;case"stickerMessage":messageContent={sticker:buffer,mimetype:message.quoted.mimetype||"image/webp"};break;case"documentMessage":messageContent={document:buffer,mimetype:message.quoted.mimetype||"application/octet-stream",fileName:message.quoted.fileName||"document"};break;}}//Fortextmessageselseif(mtype==="extendedTextMessage"||mtype==="conversation"){messageContent={text:message.quoted.text};}//Forothermessagetypes(forwardingas-is)else{try{//TrytoforwardthemessagedirectlymessageContent=message.quoted;}catch(e){returnawaitmessage.reply("❌Unsupportedmessagetype");}}//=====[OPTIMIZEDSENDINGWITHPROGRESS]=====//letsuccessCount=0;constfailedJids=[];for(const[index,jid]ofvalidJids.entries()){try{awaitclient.sendMessage(jid,messageContent);successCount++;//Progressupdate(every10groupsinsteadof5)if((index+1)%10===0){awaitmessage.reply(`🔄Sentto${index+1}/${validJids.length}groups...`);}//ApplyreduceddelayconstdelayTime=(index+1)%10===0?SAFETY.EXTRA_DELAY:SAFETY.BASE_DELAY;awaitnewPromise(resolve=>setTimeout(resolve,delayTime));}catch(error){failedJids.push(jid.replace('@g.us',''));awaitnewPromise(resolve=>setTimeout(resolve,SAFETY.BASE_DELAY));}}//=====[COMPREHENSIVEREPORT]=====//letreport=`✅*ForwardComplete*\n\n`+`📤Success:${successCount}/${validJids.length}\n`+`📦ContentType:${mtype.replace('Message','')||'text'}\n`;if(failedJids.length>0){report+=`\n❌Failed(${failedJids.length}):${failedJids.slice(0,5).join(',')}`;if(failedJids.length>5)report+=`+${failedJids.length-5}more`;}if(rawJids.length>SAFETY.MAX_JIDS){report+=`\n⚠️Note:Limitedtofirst${SAFETY.MAX_JIDS}JIDs`;}awaitmessage.reply(report);}catch(error){console.error("ForwardError:",error);awaitmessage.reply(`💢Error:${error.message.substring(0,100)}\n\n`+`Pleasetryagainorcheck:\n`+`1.JIDformatting\n`+`2.Mediatypesupport\n`+`3.Botpermissions`);}});