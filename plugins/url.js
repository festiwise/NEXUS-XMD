constaxios=require("axios");constFormData=require('form-data');constfs=require('fs');constos=require('os');constpath=require("path");const{cmd,commands}=require("../command");cmd({'pattern':"tourl",'alias':["imgtourl","imgurl","url","geturl","upload"],'react':'üñá','desc':"ConvertmediatoCatboxURL",'category':"utility",'use':".tourl[replytomedia]",'filename':__filename},async(client,message,args,{reply})=>{try{//CheckifquotedmessageexistsandhasmediaconstquotedMsg=message.quoted?message.quoted:message;constmimeType=(quotedMsg.msg||quotedMsg).mimetype||'';if(!mimeType){throw"Pleasereplytoanimage,video,oraudiofile";}//DownloadthemediaconstmediaBuffer=awaitquotedMsg.download();consttempFilePath=path.join(os.tmpdir(),`catbox_upload_${Date.now()}`);fs.writeFileSync(tempFilePath,mediaBuffer);//Getfileextensionbasedonmimetypeletextension='';if(mimeType.includes('image/jpeg'))extension='.jpg';elseif(mimeType.includes('image/png'))extension='.png';elseif(mimeType.includes('video'))extension='.mp4';elseif(mimeType.includes('audio'))extension='.mp3';constfileName=`file${extension}`;//PrepareformdataforCatboxconstform=newFormData();form.append('fileToUpload',fs.createReadStream(tempFilePath),fileName);form.append('reqtype','fileupload');//UploadtoCatboxconstresponse=awaitaxios.post("https://catbox.moe/user/api.php",form,{headers:form.getHeaders()});if(!response.data){throw"ErroruploadingtoCatbox";}constmediaUrl=response.data;fs.unlinkSync(tempFilePath);//DeterminemediatypeforresponseletmediaType='File';if(mimeType.includes('image'))mediaType='Image';elseif(mimeType.includes('video'))mediaType='Video';elseif(mimeType.includes('audio'))mediaType='Audio';//Sendresponseawaitreply(`*${mediaType}UploadedSuccessfully*\n\n`+`*Size:*${formatBytes(mediaBuffer.length)}\n`+`*URL:*${mediaUrl}\n\n`+`>¬©UploadedbyNEXUSTECH‚ò£Ô∏è`);}catch(error){console.error(error);awaitreply(`Error:${error.message||error}`);}});//HelperfunctiontoformatbytesfunctionformatBytes(bytes){if(bytes===0)return'0Bytes';constk=1024;constsizes=['Bytes','KB','MB','GB'];consti=Math.floor(Math.log(bytes)/Math.log(k));returnparseFloat((bytes/Math.pow(k,i)).toFixed(2))+''+sizes[i];}