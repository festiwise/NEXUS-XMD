constaxios=require('axios');constos=require('os');constfs=require('fs');constpath=require('path');const{cmd,commands}=require('../command');const{runtime}=require('../lib/functions');cmd({pattern:'version',alias:["changelog","cupdate","checkupdate"],react:'🚀',desc:"Checkbot'sversion,systemstats,andupdateinfo.",category:'info',filename:__filename},async(conn,mek,m,{from,sender,pushname,reply})=>{try{//ReadlocalversiondataconstlocalVersionPath=path.join(__dirname,'../data/version.json');letlocalVersion='Unknown';letchangelog='Nochangelogavailable.';if(fs.existsSync(localVersionPath)){constlocalData=JSON.parse(fs.readFileSync(localVersionPath));localVersion=localData.version;changelog=localData.changelog;}//FetchlatestversiondatafromGitHubconstrawVersionUrl='https://raw.githubusercontent.com/mrtech0135lNEXUSXMD/main/data/version.json';letlatestVersion='Unknown';letlatestChangelog='Nochangelogavailable.';try{const{data}=awaitaxios.get(rawVersionUrl);latestVersion=data.version;latestChangelog=data.changelog;}catch(error){console.error('Failedtofetchlatestversion:',error);}//CounttotalpluginsconstpluginPath=path.join(__dirname,'../plugins');constpluginCount=fs.readdirSync(pluginPath).filter(file=>file.endsWith('.js')).length;//CounttotalregisteredcommandsconsttotalCommands=commands.length;//Systeminfoconstuptime=runtime(process.uptime());constramUsage=(process.memoryUsage().heapUsed/1024/1024).toFixed(2);consttotalRam=(os.totalmem()/1024/1024).toFixed(2);consthostName=os.hostname();constlastUpdate=fs.statSync(localVersionPath).mtime.toLocaleString();//GitHubstatsconstgithubRepo='https://github.com/mrtech0135/NEXUSXMD';//CheckupdatestatusletupdateMessage=`✅YourNEXUS-XMDbotisup-to-date!`;if(localVersion!==latestVersion){updateMessage=`🚀YourNEXUS-XMDbotisoutdated!🔹*CurrentVersion:*${localVersion}🔹*LatestVersion:*${latestVersion}Use*.update*toupdate.`;}conststatusMessage=`🌟*Good${newDate().getHours()<12?'Morning':'Night'},${pushname}!*🌟\n\n`+`📌*BotName:*NEXUS-XMD\n🔖*CurrentVersion:*${localVersion}\n📢*LatestVersion:*${latestVersion}\n📂*TotalPlugins:*${pluginCount}\n🔢*TotalCommands:*${totalCommands}\n\n`+`💾*SystemInfo:*\n⏳*Uptime:*${uptime}\n📟*RAMUsage:*${ramUsage}MB/${totalRam}MB\n⚙️*HostName:*${hostName}\n📅*LastUpdate:*${lastUpdate}\n\n`+`📝*Changelog:*\n${latestChangelog}\n\n`+`⭐*GitHubRepo:*${githubRepo}\n👤*Owner:*[Pkdriller](https://github.com/mrtech0135/NEXUSXMD)\n\n${updateMessage}\n\n🚀*Hey!Don'tforgettofork&startherepo!*`;//Sendthestatusmessagewithanimageawaitconn.sendMessage(from,{image:{url:'https://files.catbox.moe/ug8w1x.jpg'},caption:statusMessage,contextInfo:{mentionedJid:[m.sender],forwardingScore:999,isForwarded:true,forwardedNewsletterMessageInfo:{newsletterJid:'120363288304618280@newsletter',newsletterName:'NexusTech',serverMessageId:143}}},{quoted:mek});}catch(error){console.error('Errorfetchingversioninfo:',error);reply('❌Anerroroccurredwhilecheckingthebotversion.');}});