constconfig=require('../config')const{cmd,commands}=require('../command')const{getBuffer,getGroupAdmins,getRandom,h2k,isUrl,Json,runtime,sleep,fetchJson}=require('../lib/functions')cmd({pattern:"tagall",react:"üîä",alias:["gc_tagall"],desc:"ToTagallMembers",category:"group",use:'.tagall[message]',filename:__filename},async(conn,mek,m,{from,participants,reply,isGroup,senderNumber,groupAdmins,prefix,command,args,body})=>{try{if(!isGroup)returnreply("‚ùåThiscommandcanonlybeusedingroups.");constbotOwner=conn.user.id.split(":")[0];//Extractbotowner'snumberconstsenderJid=senderNumber+"@s.whatsapp.net";if(!groupAdmins.includes(senderJid)&&senderNumber!==botOwner){returnreply("‚ùåOnlygroupadminsorthebotownercanusethiscommand.");}//EnsuregroupmetadataisfetchedproperlyletgroupInfo=awaitconn.groupMetadata(from).catch(()=>null);if(!groupInfo)returnreply("‚ùåFailedtofetchgroupinformation.");letgroupName=groupInfo.subject||"UnknownGroup";lettotalMembers=participants?participants.length:0;if(totalMembers===0)returnreply("‚ùåNomembersfoundinthisgroup.");letemojis=['üì¢','üîä','üåê','üî∞','‚ù§‚Äçü©π','ü§ç','üñ§','ü©µ','üìù','üíó','üîñ','ü™©','üì¶','üéâ','üõ°Ô∏è','üí∏','‚è≥','üóø','üöÄ','üéß','ü™Ä','‚ö°','üö©','üçÅ','üó£Ô∏è','üëª','‚ö†Ô∏è','üî•'];letrandomEmoji=emojis[Math.floor(Math.random()*emojis.length)];//Propermessageextractionletmessage=body.slice(body.indexOf(command)+command.length).trim();if(!message)message="AttentionEveryone";//Defaultmessageletteks=`‚ñ¢Group:*${groupName}*\n‚ñ¢Members:*${totalMembers}*\n‚ñ¢Message:*${message}*\n\n‚îå‚îÄ‚îÄ‚îÄ‚ä∑*MENTIONS*\n`;for(letmemofparticipants){if(!mem.id)continue;//Preventundefinederrorsteks+=`${randomEmoji}@${mem.id.split('@')[0]}\n`;}teks+="‚îî‚îÄ‚îÄ‚ú™NEXUS‚îÉXMD‚ú™‚îÄ‚îÄ";conn.sendMessage(from,{text:teks,mentions:participants.map(a=>a.id)},{quoted:mek});}catch(e){console.error("TagAllError:",e);reply(`‚ùå*ErrorOccurred!!*\n\n${e.message||e}`);}});