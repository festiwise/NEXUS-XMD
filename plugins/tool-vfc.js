constfs=require('fs');constconfig=require('../config')const{cmd,commands}=require('../command')const{getBuffer,getGroupAdmins,getRandom,h2k,isUrl,Json,runtime,sleep,fetchJson}=require('../lib/functions')//vcf//cmd({pattern:'savecontact',alias:["vcf","scontact","savecontacts"],desc:'gcvcard',category:'tools',filename:__filename},async(conn,mek,m,{from,quoted,body,isCmd,command,args,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,groupMetadata,groupName,participants,groupAdmins,isBotAdmins,isAdmins,reply})=>{try{if(!isGroup)returnreply("Thiscommandisforgroupsonly.");if(!isOwner)returnreply("*_Thiscommandisfortheowneronly_*");letcard=quoted||m;//Handleifquotedmessageexistsletcmiggc=groupMetadata;const{participants}=groupMetadata;letorgiggc=participants.map(a=>a.id);letvcard='';letnoPort=0;for(letaofcmiggc.participants){vcard+=`BEGIN:VCARD\nVERSION:3.0\nFN:[${noPort++}]+${a.id.split("@")[0]}\nTEL;type=CELL;type=VOICE;waid=${a.id.split("@")[0]}:+${a.id.split("@")[0]}\nEND:VCARD\n`;}letnmfilect='./contacts.vcf';reply('Saving'+cmiggc.participants.length+'participantscontact');fs.writeFileSync(nmfilect,vcard.trim());awaitsleep(2000);awaitconn.sendMessage(from,{document:fs.readFileSync(nmfilect),mimetype:'text/vcard',fileName:'Nexus.vcf',caption:`\nDonesaving.\nGroupName:*${cmiggc.subject}*\nContacts:*${cmiggc.participants.length}*\n>ᴘᴏᴡᴇʀᴇᴅʙʏNexusᴛᴇᴄʜ`},{quoted:mek});fs.unlinkSync(nmfilect);//Cleanupthefileaftersending}catch(err){reply(err.toString());}});