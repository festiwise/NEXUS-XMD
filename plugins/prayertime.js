constaxios=require('axios');constconfig=require('../config');const{cmd,commands}=require('../command');constfetch=require('node-fetch');cmd({pattern:"praytime",alias:["prayertimes","prayertime","ptime"],react:"✅",desc:"Gettheprayertimes,weather,andlocationforthecity.",category:"information",filename:__filename,},async(conn,mek,m,{from,l,quoted,body,isCmd,command,args,q,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,groupMetadata,groupName,participants,isItzcp,groupAdmins,isBotAdmins,isAdmins,reply})=>{try{constcity=args.length>0?args.join(""):"bhakkar";//DefaulttoBhakkarifnocityisprovidedconstapiUrl=`https://api.nexoracle.com/islamic/prayer-times?city=${city}`;constresponse=awaitfetch(apiUrl);if(!response.ok){returnreply('Errorfetchingprayertimes!');}constdata=awaitresponse.json();if(data.status!==200){returnreply('Failedtogetprayertimes.Pleasetryagainlater.');}constprayerTimes=data.result.items[0];constweather=data.result.today_weather;//Weatherdataconstlocation=data.result.city;//Locationname//Buildingthemessagecontentletdec=`*PrayerTimesfor${location},${data.result.state}*\n\n`;dec+=`📍*Location*:${location},${data.result.state},${data.result.country}\n`;dec+=`🕌*Method*:${data.result.prayer_method_name}\n\n`;dec+=`🌅*Fajr*:${prayerTimes.fajr}\n`;dec+=`🌄*Shurooq*:${prayerTimes.shurooq}\n`;dec+=`☀️*Dhuhr*:${prayerTimes.dhuhr}\n`;dec+=`🌇*Asr*:${prayerTimes.asr}\n`;dec+=`🌆*Maghrib*:${prayerTimes.maghrib}\n`;dec+=`🌃*Isha*:${prayerTimes.isha}\n\n`;dec+=`🧭*QiblaDirection*:${data.result.qibla_direction}°\n`;consttemperature=weather.temperature!==null?`${weather.temperature}°C`:'Datanotavailable';dec+=`🌡️*Temperature*:${temperature}\n`;//Sendingtheimagewiththecaptionandcontextinfoawaitconn.sendMessage(from,{image:{url:`https://files.catbox.moe/ug8w1x.jpg`},//ImageURLherecaption:dec,contextInfo:{mentionedJid:[m.sender],forwardingScore:999,isForwarded:true,forwardedNewsletterMessageInfo:{newsletterJid:'120363288304618280@newsletter',newsletterName:'Nexusxmd',serverMessageId:143}}},{quoted:mek});//Optionally,sendanaudiofilerelatedtotheprayertimeawaitconn.sendMessage(from,{audio:{url:'https://files.catbox.moe/6j2z63.mp3'},mimetype:'audio/mp4',ptt:false},{quoted:mek});}catch(e){console.log(e);reply('*Erroroccurredwhilefetchingprayertimesandweather.*');}});