const{cmd,commands}=require('../command');constconfig=require('../config');constprefix=config.PREFIX;constfs=require('fs');const{getBuffer,getGroupAdmins,getRandom,h2k,isUrl,Json,sleep,fetchJson}=require('../lib/functions2');const{writeFileSync}=require('fs');constpath=require('path');cmd({pattern:"invite",alias:["glink","grouplink"],desc:"Getgroupinvitelink.",category:"group",//Alreadygroupfilename:__filename,},async(conn,mek,m,{from,quoted,body,args,q,isGroup,sender,reply})=>{try{//Ensurethisisbeingusedinagroupif(!isGroup)returnreply("𝐓𝐡𝐢𝐬𝐅𝐞𝐚𝐭𝐮𝐫𝐞𝐈𝐬𝐎𝐧𝐥𝐲𝐅𝐨𝐫𝐆𝐫𝐨𝐮𝐩❗");//Getthesender'snumberconstsenderNumber=sender.split('@')[0];constbotNumber=conn.user.id.split(':')[0];//CheckifthebotisanadminconstgroupMetadata=isGroup?awaitconn.groupMetadata(from):'';constgroupAdmins=groupMetadata?groupMetadata.participants.filter(member=>member.admin):[];constisBotAdmins=isGroup?groupAdmins.some(admin=>admin.id===botNumber+'@s.whatsapp.net'):false;if(!isBotAdmins)returnreply("𝐏𝐥𝐞𝐚𝐬𝐞𝐏𝐫𝐨𝐯𝐢𝐝𝐞𝐌𝐞𝐀𝐝𝐦𝐢𝐧𝐑𝐨𝐥𝐞❗");//CheckifthesenderisanadminconstisAdmins=isGroup?groupAdmins.some(admin=>admin.id===sender):false;if(!isAdmins)returnreply("𝐏𝐥𝐞𝐚𝐬𝐞𝐏𝐫𝐨𝐯𝐢𝐝𝐞𝐌𝐞𝐀𝐝𝐦𝐢𝐧𝐑𝐨𝐥𝐞❗");//GettheinvitecodeandgeneratethelinkconstinviteCode=awaitconn.groupInviteCode(from);if(!inviteCode)returnreply("Failedtoretrievetheinvitecode.");constinviteLink=`https://chat.whatsapp.com/${inviteCode}`;//Replywiththeinvitelinkreturnreply(`*Hereisyourgroupinvitelink:*\n${inviteLink}`);}catch(error){console.error("Errorininvitecommand:",error);reply(`Anerroroccurred:${error.message||"Unknownerror"}`);}});