constconverter=require('../data/converter');conststickerConverter=require('../data/sticker-converter');const{cmd}=require('../command');cmd({pattern:'convert',alias:['sticker2img','stoimg','stickertoimage','s2i'],desc:'Convertstickerstoimages',category:'media',react:'🖼️',filename:__filename},async(client,match,message,{from})=>{//Inputvalidationif(!message.quoted){returnawaitclient.sendMessage(from,{text:"✨*StickerConverter*\n\nPleasereplytoastickermessage\n\nExample:`.convert`(replytosticker)"},{quoted:message});}if(message.quoted.mtype!=='stickerMessage'){returnawaitclient.sendMessage(from,{text:"❌Onlystickermessagescanbeconverted"},{quoted:message});}//Sendprocessingmessageawaitclient.sendMessage(from,{text:"🔄Convertingstickertoimage..."},{quoted:message});try{conststickerBuffer=awaitmessage.quoted.download();constimageBuffer=awaitstickerConverter.convertStickerToImage(stickerBuffer);//Sendresultawaitclient.sendMessage(from,{image:imageBuffer,caption:">PoweredByNexustech☣️",mimetype:'image/png'},{quoted:message});}catch(error){console.error('Conversionerror:',error);awaitclient.sendMessage(from,{text:"❌Pleasetrywithadifferentsticker."},{quoted:message});}});cmd({pattern:'tomp3',desc:'Convertmediatoaudio',category:'audio',react:'🎵',filename:__filename},async(client,match,message,{from})=>{//Inputvalidationif(!match.quoted){returnawaitclient.sendMessage(from,{text:"*🔊Pleasereplytoavideo/audiomessage*"},{quoted:message});}if(!['videoMessage','audioMessage'].includes(match.quoted.mtype)){returnawaitclient.sendMessage(from,{text:"❌Onlyvideo/audiomessagescanbeconverted"},{quoted:message});}if(match.quoted.seconds>300){returnawaitclient.sendMessage(from,{text:"⏱️Mediatoolong(max5minutes)"},{quoted:message});}//Sendprocessingmessageandstoreitawaitclient.sendMessage(from,{text:"🔄Convertingtoaudio..."},{quoted:message});try{constbuffer=awaitmatch.quoted.download();constext=match.quoted.mtype==='videoMessage'?'mp4':'m4a';constaudio=awaitconverter.toAudio(buffer,ext);//Sendresultawaitclient.sendMessage(from,{audio:audio,mimetype:'audio/mpeg'},{quoted:message});}catch(e){console.error('Conversionerror:',e.message);awaitclient.sendMessage(from,{text:"❌Failedtoprocessaudio"},{quoted:message});}});cmd({pattern:'toptt',desc:'Convertmediatovoicemessage',category:'audio',react:'🎙️',filename:__filename},async(client,match,message,{from})=>{//Inputvalidationif(!match.quoted){returnawaitclient.sendMessage(from,{text:"*🗣️Pleasereplytoavideo/audiomessage*"},{quoted:message});}if(!['videoMessage','audioMessage'].includes(match.quoted.mtype)){returnawaitclient.sendMessage(from,{text:"❌Onlyvideo/audiomessagescanbeconverted"},{quoted:message});}if(match.quoted.seconds>60){returnawaitclient.sendMessage(from,{text:"⏱️Mediatoolongforvoice(max1minute)"},{quoted:message});}//Sendprocessingmessageawaitclient.sendMessage(from,{text:"🔄Convertingtovoicemessage..."},{quoted:message});try{constbuffer=awaitmatch.quoted.download();constext=match.quoted.mtype==='videoMessage'?'mp4':'m4a';constptt=awaitconverter.toPTT(buffer,ext);//Sendresultawaitclient.sendMessage(from,{audio:ptt,mimetype:'audio/ogg;codecs=opus',ptt:true},{quoted:message});}catch(e){console.error('PTTconversionerror:',e.message);awaitclient.sendMessage(from,{text:"❌Failedtocreatevoicemessage"},{quoted:message});}});