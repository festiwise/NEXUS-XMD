const{cmd}=require("../command");constaxios=require("axios");cmd({pattern:"tempnum",alias:["fakenum","tempnumber"],desc:"Gettemporarynumbers&OTPinstructions",category:"tools",react:"📱",use:"<country-code>"},async(conn,mek,m,{from,args,reply})=>{try{//Mandatorycountrycodecheckif(!args||args.length<1){returnreply(`❌*Usage:*.tempnum<country-code>\nExample:.tempnumus\n\n📦Use.otpbox<number>*tocheckOTPs`);}constcountryCode=args[0].toLowerCase();//APIcallwithvalidationconst{data}=awaitaxios.get(`https://api.vreden.my.id/api/tools/fakenumber/listnumber?id=${countryCode}`,{timeout:10000,validateStatus:status=>status===200});//Fixedsyntaxerrorhere-addedmissingparenthesisif(!data?.result||!Array.isArray(data.result)){console.error("InvalidAPIstructure:",data);returnreply(`⚠InvalidAPIresponseformat\nTry.tempnumus`);}if(data.result.length===0){returnreply(`📭Nonumbersavailablefor*${countryCode.toUpperCase()}*\nTryanothercountrycode!\n\nUse.otpbox<number>afterselection`);}//Processnumbersconstnumbers=data.result.slice(0,25);constnumberList=numbers.map((num,i)=>`${String(i+1).padStart(2,'')}.${num.number}`).join("\n");//FinalmessagewithOTPinstructionsawaitreply(`╭──「📱TEMPORARYNUMBERS」\n`+`│\n`+`│Country:${countryCode.toUpperCase()}\n`+`│NumbersFound:${numbers.length}\n`+`│\n`+`${numberList}\n\n`+`╰──「📦USE:.otpbox<number>」\n`+`_Example:.otpbox+1234567890_`);}catch(err){console.error("APIError:",err);consterrorMessage=err.code==="ECONNABORTED"?`⏳*Timeout*:APItooktoolong\nTrysmallercountrycodeslike'us','gb'`:`⚠*Error*:${err.message}\nUseformat:.tempnum<country-code>`;reply(`${errorMessage}\n\n🔑Remember:${prefix}otpinbox<number>`);}});cmd({pattern:"templist",alias:["tempnumberlist","tempnlist","listnumbers"],desc:"Showlistofcountrieswithtempnumbers",category:"tools",react:"🌍",filename:__filename,use:".templist"},async(conn,m,{reply})=>{try{const{data}=awaitaxios.get("https://api.vreden.my.id/api/tools/fakenumber/country");if(!data||!data.result)returnreply("❌Couldn'tfetchcountrylist.");constcountries=data.result.map((c,i)=>`*${i+1}.*${c.title}\`(${c.id})\``).join("\n");awaitreply(`🌍*TotalAvailableCountries:*${data.result.length}\n\n${countries}`);}catch(e){console.error("TEMPLISTERROR:",e);reply("❌Failedtofetchtemporarynumbercountrylist.");}});cmd({pattern:"otpbox",alias:["checkotp","getotp"],desc:"CheckOTPmessagesfortemporarynumber",category:"tools",react:"🔑",use:"<full-number>"},async(conn,mek,m,{from,args,reply})=>{try{//Validateinputif(!args[0]||!args[0].startsWith("+")){returnreply(`❌*Usage:*.otpbox<full-number>\nExample:.otpbox+254732297xx`);}constphoneNumber=args[0].trim();//FetchOTPmessagesconst{data}=awaitaxios.get(`https://api.vreden.my.id/api/tools/fakenumber/message?nomor=${encodeURIComponent(phoneNumber)}`,{timeout:10000,validateStatus:status=>status===200});//Validateresponseif(!data?.result||!Array.isArray(data.result)){returnreply("⚠NoOTPmessagesfoundforthisnumber");}//FormatOTPmessagesconstotpMessages=data.result.map(msg=>{//ExtractOTPcode(matchescommonOTPpatterns)constotpMatch=msg.content.match(/\b\d{4,8}\b/g);constotpCode=otpMatch?otpMatch[0]:"Notfound";return`┌*From:*${msg.from||"Unknown"}│*Code:*${otpCode}│*Time:*${msg.time_wib||msg.timestamp}└*Message:*${msg.content.substring(0,50)}${msg.content.length>50?"...":""}`;}).join("\n\n");awaitreply(`╭──「🔑OTPMESSAGES」\n`+`│Number:${phoneNumber}\n`+`│MessagesFound:${data.result.length}\n`+`│\n`+`${otpMessages}\n`+`╰──「📌Use.tempnumtogetnumbers」`);}catch(err){console.error("OTPCheckError:",err);consterrorMsg=err.code==="ECONNABORTED"?"⌛OTPchecktimedout.Tryagainlater":`⚠Error:${err.response?.data?.error||err.message}`;reply(`${errorMsg}\n\nUsage:.otpbox+2547322xx`);}});