const{fetchJson}=require("../lib/functions");const{downloadTiktok}=require("@mrnima/tiktok-downloader");const{facebook}=require("@mrnima/facebook-downloader");constcheerio=require("cheerio");const{igdl}=require("ruhend-scraper");constaxios=require("axios");const{cmd,commands}=require('../command');cmd({pattern:"ig2",alias:["insta2","Instagram2"],desc:"TodownloadInstagramvideos.",react:"🎥",category:"download",filename:__filename},async(conn,m,store,{from,q,reply})=>{try{if(!q||!q.startsWith("http")){returnreply("❌PleaseprovideavalidInstagramlink.");}awaitconn.sendMessage(from,{react:{text:"⏳",key:m.key}});constresponse=awaitaxios.get(`https://api.davidcyriltech.my.id/instagram?url=${q}`);constdata=response.data;if(!data||data.status!==200||!data.downloadUrl){returnreply("⚠️FailedtofetchInstagramvideo.Pleasecheckthelinkandtryagain.");}awaitconn.sendMessage(from,{video:{url:data.downloadUrl},mimetype:"video/mp4",caption:"📥*InstagramVideoDownloadedSuccessfully!*"},{quoted:m});}catch(error){console.error("Error:",error);reply("❌Anerroroccurredwhileprocessingyourrequest.Pleasetryagain.");}});//twitter-dlcmd({pattern:"twitter",alias:["tweet","twdl"],desc:"DownloadTwittervideos",category:"download",filename:__filename},async(conn,m,store,{from,quoted,q,reply})=>{try{if(!q||!q.startsWith("https://")){returnconn.sendMessage(from,{text:"❌PleaseprovideavalidTwitterURL."},{quoted:m});}awaitconn.sendMessage(from,{react:{text:'⏳',key:m.key}});constresponse=awaitaxios.get(`https://www.dark-yasiya-api.site/download/twitter?url=${q}`);constdata=response.data;if(!data||!data.status||!data.result){returnreply("⚠️FailedtoretrieveTwittervideo.Pleasecheckthelinkandtryagain.");}const{desc,thumb,video_sd,video_hd}=data.result;constcaption=`╭━━━〔*TWITTERDOWNLOADER*〕━━━⊷\n`+`┃▸*Description:*${desc||"Nodescription"}\n`+`╰━━━⪼\n\n`+`📹*DownloadOptions:*\n`+`1️⃣*SDQuality*\n`+`2️⃣*HDQuality*\n`+`🎵*AudioOptions:*\n`+`3️⃣*Audio*\n`+`4️⃣*Document*\n`+`5️⃣*Voice*\n\n`+`📌*Replywiththenumbertodownloadyourchoice.*`;constsentMsg=awaitconn.sendMessage(from,{image:{url:thumb},caption:caption},{quoted:m});constmessageID=sentMsg.key.id;conn.ev.on("messages.upsert",async(msgData)=>{constreceivedMsg=msgData.messages[0];if(!receivedMsg.message)return;constreceivedText=receivedMsg.message.conversation||receivedMsg.message.extendedTextMessage?.text;constsenderID=receivedMsg.key.remoteJid;constisReplyToBot=receivedMsg.message.extendedTextMessage?.contextInfo?.stanzaId===messageID;if(isReplyToBot){awaitconn.sendMessage(senderID,{react:{text:'⬇️',key:receivedMsg.key}});switch(receivedText){case"1":awaitconn.sendMessage(senderID,{video:{url:video_sd},caption:"📥*DownloadedinSDQuality*"},{quoted:receivedMsg});break;case"2":awaitconn.sendMessage(senderID,{video:{url:video_hd},caption:"📥*DownloadedinHDQuality*"},{quoted:receivedMsg});break;case"3":awaitconn.sendMessage(senderID,{audio:{url:video_sd},mimetype:"audio/mpeg"},{quoted:receivedMsg});break;case"4":awaitconn.sendMessage(senderID,{document:{url:video_sd},mimetype:"audio/mpeg",fileName:"Twitter_Audio.mp3",caption:"📥*AudioDownloadedasDocument*"},{quoted:receivedMsg});break;case"5":awaitconn.sendMessage(senderID,{audio:{url:video_sd},mimetype:"audio/mp4",ptt:true},{quoted:receivedMsg});break;default:reply("❌Invalidoption!Pleasereplywith1,2,3,4,or5.");}}});}catch(error){console.error("Error:",error);reply("❌Anerroroccurredwhileprocessingyourrequest.Pleasetryagain.");}});//MediaFire-dlcmd({pattern:"mediafire",alias:["mfire"],desc:"TodownloadMediaFirefiles.",react:"🎥",category:"download",filename:__filename},async(conn,m,store,{from,quoted,q,reply})=>{try{if(!q){returnreply("❌PleaseprovideavalidMediaFirelink.");}awaitconn.sendMessage(from,{react:{text:"⏳",key:m.key}});constresponse=awaitaxios.get(`https://www.dark-yasiya-api.site/download/mfire?url=${q}`);constdata=response.data;if(!data||!data.status||!data.result||!data.result.dl_link){returnreply("⚠️FailedtofetchMediaFiredownloadlink.Ensurethelinkisvalidandpublic.");}const{dl_link,fileName,fileType}=data.result;constfile_name=fileName||"mediafire_download";constmime_type=fileType||"application/octet-stream";awaitconn.sendMessage(from,{react:{text:"⬆️",key:m.key}});constcaption=`╭━━━〔*MEDIAFIREDOWNLOADER*〕━━━⊷\n`+`┃▸*FileName:*${file_name}\n`+`┃▸*FileType:*${mime_type}\n`+`╰━━━⪼\n\n`+`📥*Downloadingyourfile...*`;awaitconn.sendMessage(from,{document:{url:dl_link},mimetype:mime_type,fileName:file_name,caption:caption},{quoted:m});}catch(error){console.error("Error:",error);reply("❌Anerroroccurredwhileprocessingyourrequest.Pleasetryagain.");}});//apk-dlcmd({pattern:"apk",desc:"DownloadAPKfromAptoide.",category:"download",filename:__filename},async(conn,m,store,{from,quoted,q,reply})=>{try{if(!q){returnreply("❌Pleaseprovideanappnametosearch.");}awaitconn.sendMessage(from,{react:{text:"⏳",key:m.key}});constapiUrl=`http://ws75.aptoide.com/api/7/apps/search/query=${q}/limit=1`;constresponse=awaitaxios.get(apiUrl);constdata=response.data;if(!data||!data.datalist||!data.datalist.list.length){returnreply("⚠️Noresultsfoundforthegivenappname.");}constapp=data.datalist.list[0];constappSize=(app.size/1048576).toFixed(2);//ConvertbytestoMBconstcaption=`╭━━━〔*APKDownloader*〕━━━┈⊷┃📦*Name:*${app.name}┃🏋*Size:*${appSize}MB┃📦*Package:*${app.package}┃📅*UpdatedOn:*${app.updated}┃👨‍💻*Developer:*${app.developer.name}╰━━━━━━━━━━━━━━━┈⊷🔗*PoweredByNexus-xmd*`;awaitconn.sendMessage(from,{react:{text:"⬆️",key:m.key}});awaitconn.sendMessage(from,{document:{url:app.file.path_alt},fileName:`${app.name}.apk`,mimetype:"application/vnd.android.package-archive",caption:caption},{quoted:m});awaitconn.sendMessage(from,{react:{text:"✅",key:m.key}});}catch(error){console.error("Error:",error);reply("❌AnerroroccurredwhilefetchingtheAPK.Pleasetryagain.");}});//G-Drive-DLcmd({pattern:"gdrive",desc:"DownloadGoogleDrivefiles.",react:"🌐",category:"download",filename:__filename},async(conn,m,store,{from,quoted,q,reply})=>{try{if(!q){returnreply("❌PleaseprovideavalidGoogleDrivelink.");}awaitconn.sendMessage(from,{react:{text:"⬇️",key:m.key}});constapiUrl=`https://api.fgmods.xyz/api/downloader/gdrive?url=${q}&apikey=mnp3grlZ`;constresponse=awaitaxios.get(apiUrl);constdownloadUrl=response.data.result.downloadUrl;if(downloadUrl){awaitconn.sendMessage(from,{react:{text:"⬆️",key:m.key}});awaitconn.sendMessage(from,{document:{url:downloadUrl},mimetype:response.data.result.mimetype,fileName:response.data.result.fileName,caption:"*©PoweredByJawadTechX*"},{quoted:m});awaitconn.sendMessage(from,{react:{text:"✅",key:m.key}});}else{returnreply("⚠️NodownloadURLfound.Pleasecheckthelinkandtryagain.");}}catch(error){console.error("Error:",error);reply("❌AnerroroccurredwhilefetchingtheGoogleDrivefile.Pleasetryagain.");}});