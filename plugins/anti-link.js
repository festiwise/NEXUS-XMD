const{cmd}=require('../command');constconfig=require("../config");cmd({'on':"body"},async(conn,m,store,{from,body,sender,isGroup,isAdmins,isBotAdmins,reply})=>{try{//Initializewarningsifnotexistsif(!global.warnings){global.warnings={};}//Onlyactingroupswherebotisadminandsenderisn'tadminif(!isGroup||isAdmins||!isBotAdmins){return;}//ListoflinkpatternstodetectconstlinkPatterns=[/https?:\/\/(?:chat\.whatsapp\.com|wa\.me)\/\S+/gi,//WhatsApplinks/https?:\/\/(?:api\.whatsapp\.com|wa\.me)\/\S+/gi,//WhatsAppAPIlinks/wa\.me\/\S+/gi,//WhatsApp.melinks/https?:\/\/(?:t\.me|telegram\.me)\/\S+/gi,//Telegramlinks/https?:\/\/(?:www\.)?\.com\/\S+/gi,//Generic.comlinks/https?:\/\/(?:www\.)?twitter\.com\/\S+/gi,//Twitterlinks/https?:\/\/(?:www\.)?linkedin\.com\/\S+/gi,//LinkedInlinks/https?:\/\/(?:whatsapp\.com|channel\.me)\/\S+/gi,//OtherWhatsApp/channellinks/https?:\/\/(?:www\.)?reddit\.com\/\S+/gi,//Redditlinks/https?:\/\/(?:www\.)?discord\.com\/\S+/gi,//Discordlinks/https?:\/\/(?:www\.)?twitch\.tv\/\S+/gi,//Twitchlinks/https?:\/\/(?:www\.)?vimeo\.com\/\S+/gi,//Vimeolinks/https?:\/\/(?:www\.)?dailymotion\.com\/\S+/gi,//Dailymotionlinks/https?:\/\/(?:www\.)?medium\.com\/\S+/gi//Mediumlinks];//CheckifmessagecontainsanyforbiddenlinksconstcontainsLink=linkPatterns.some(pattern=>pattern.test(body));//Onlyproceedifanti-linkisenabledandlinkisdetectedif(containsLink&&config.ANTI_LINK==='true'){console.log(`Linkdetectedfrom${sender}:${body}`);//Trytodeletethemessagetry{awaitconn.sendMessage(from,{delete:m.key});console.log(`Messagedeleted:${m.key.id}`);}catch(error){console.error("Failedtodeletemessage:",error);}//Updatewarningcountforuserglobal.warnings[sender]=(global.warnings[sender]||0)+1;constwarningCount=global.warnings[sender];//Handlewarningsif(warningCount<4){//Sendwarningmessageawaitconn.sendMessage(from,{text:`‎*⚠️LINKSARENOTALLOWED⚠️*\n`+`*╭────⬡WARNING⬡────*\n`+`*├▢USER:*@${sender.split('@')[0]}!\n`+`*├▢COUNT:${warningCount}*\n`+`*├▢REASON:LINKSENDING*\n`+`*├▢WARNLIMIT:3*\n`+`*╰────────────────*`,mentions:[sender]});}else{//Removeuseriftheyexceedwarninglimitawaitconn.sendMessage(from,{text:`@${sender.split('@')[0]}*HASBEENREMOVED-WARNLIMITEXCEEDED!*`,mentions:[sender]});awaitconn.groupParticipantsUpdate(from,[sender],"remove");deleteglobal.warnings[sender];}}}catch(error){console.error("Anti-linkerror:",error);reply("❌Anerroroccurredwhileprocessingthemessage.");}});